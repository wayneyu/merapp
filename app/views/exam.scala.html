@(course: String, term_year: String, questions: List[Question])

@main(course + " " + term_year){
<h2>Questions available</h2>

Average easiness: <span class="exam_easiness easiness_rating"></span> (total of <span class="rating_count">0</span> votes).<br><br>

<ul id="exam_questions_list" class="exam_questions_list">
    @for( question <- questions ){
        <li class="exam_question"><a href="@routes.QuestionController.question(course, term_year, question.question)">@question.question</a>
            <span class="question_easiness easiness_rating" title=@question.num_votes>@if(question.num_votes > 0){
            @question.rating%
            } else {
            -
            }</span></li>
    }
</ul>

<br>
<script>

var total_easiness = 0;
var num_rated_questions = 0;
var total_ratings = 0;
$(".question_easiness").each(function(){
    var val = parseInt($(this).text().replace("%",""));
    if(!isNaN(val)){
        total_easiness += val;
        num_rated_questions += 1;
        total_ratings += parseInt($(this).attr("title"));
    }
});
$(".exam_easiness").text(Math.round(total_easiness/num_rated_questions) + "%");
$(".rating_count").text(total_ratings);

$(".easiness_rating").each(function(){
    var val = parseInt($(this).text().replace("%",""));
    if (val < 33) {var col = "#FF0000";}
    else if (val < 66) {var col = "#FF9900";}
    else if (val <= 100) {var col = "#006600";}
    else {var col = "#A0A0A0";} // no vote available
    $(this).css("color", col);
    $(this).attr("title", $(this).attr("title") + " vote(s)");
    });
</script>
}
